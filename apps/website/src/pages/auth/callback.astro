---
// This page handles the JWT callback from devpad
// The actual token storage happens via the backend's HTML response
// This is just a fallback if someone navigates here directly
---

<html>
<head>
  <title>Authenticating...</title>
</head>
<body>
  <script>
    // Check if we have a token in the URL (fallback handling)
    const params = new URLSearchParams(window.location.search);
    const token = params.get('token');
    
    if (token) {
      localStorage.setItem('devpad_jwt', token);
      window.location.href = '/posts';
    } else if (localStorage.getItem('devpad_jwt')) {
      // Already have token, redirect to posts
      window.location.href = '/posts';
    } else {
      // No token, redirect to login
      window.location.href = '/auth/login';
    }
  </script>
  <noscript>
    <p>JavaScript is required for authentication. Please enable JavaScript and try again.</p>
  </noscript>
</body>
</html>
